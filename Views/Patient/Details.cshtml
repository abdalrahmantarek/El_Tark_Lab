@model Patient
@{

	var Visitlist = ViewData["VisitList"] as List<Visit>;
}


<div id="kt_app_main" class=" app-main app-content flex-column-fluid mt-10">
		<!--begin::Content container-->
	<div id="kt_app_content_container" class="app-container container-xxl">
		<div class="d-flex flex-column flex-xl-row">
			<div class="flex-column flex-lg-row-auto w-200 w-xl-450px mb-10">
				<!--begin::Card-->
				<div class="card mb-5 mb-xl-8">
					<!--begin::Card body-->
					<div class="card-body pt-15">
						<!--begin::Summary-->
						<div class="d-flex flex-center flex-column mb-5">
								<!--begin::Name-->
							<div class="fs-3 text-gray-800 text-hover-primary fw-bold mb-1">@Model.PatientName</div>
								<!--end::Name-->
								<!--begin::Position-->
							<div class="fs-5 fw-semibold text-muted mb-6">@Model.PatientEmail</div>
								<!--end::Position-->

							</div>
						<!--end::Summary-->
						<!--begin::Details toggle-->
						<div class="d-flex flex-stack fs-4 py-3">
								<div class="fw-bold rotate collapsible" data-bs-toggle="collapse" href="#kt_customer_view_details" role="button" aria-expanded="false" aria-controls="kt_customer_view_details">
									Details
									<span class="ms-2 rotate-180">
										<!--begin::Svg Icon | path: icons/duotune/arrows/arr072.svg-->
										<span class="svg-icon svg-icon-3">
											<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z" fill="currentColor" />
											</svg>
										</span>
										<!--end::Svg Icon-->
									</span>
								</div>
								<span data-bs-toggle="tooltip" data-bs-trigger="hover" title="Edit Patient details">
								<a asp-action="Edit" asp-controller="patient" asp-route-id="@Model.PatientId" class="btn btn-sm btn-light-primary">Edit</a>
								</span>
							</div>
						<!--end::Details toggle-->
						<div class="separator separator-dashed my-3"></div>
						<!--begin::Details content-->
						<div id="kt_customer_view_details" class="collapse show">
							
								<div class="py-5 fs-6">
									<div class="row g-9 mb-7 ">
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<div class="fw-bold mt-5">ID</div>
											<div class="text-gray-600">@Model.PatientId</div>
										</div>
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
											<div class="fw-bold mt-5">CreationDate</div>
											<div class="text-gray-600">
											@if (@Model.CreationDate != null)
											{
												@Model.CreationDate.Date.ToString("yyyy-MM-dd")
											}
											
											</div>
										</div>
										<!--begin::Details item-->
										<!--begin::Details item-->
									</div>
									<div class="row g-9 mb-7 ">
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<div class="fw-bold mt-5">NidType</div>
											<div class="text-gray-600">@Model.PatientNidType</div>
										</div>
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
											<div class="fw-bold mt-5">Nid Number</div>
											<div class="text-gray-600">
												@Model.PatientNid
											</div>
										</div>
										<!--begin::Details item-->
										<!--begin::Details item-->
									</div>
									<div class="row g-9 mb-7 ">
										<div class="col-md-6 fv-row">
											<div class="fw-bold mt-5">Gender</div>
											<div class="text-gray-600">
												@Model.PatientGender
											</div>
										</div>
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
											<div class="fw-bold mt-5">Birthdate</div>
											<div class="text-gray-600">
											@if (@Model.PatientBirthdate != null)
												{
													@Model.PatientBirthdate.Value.ToString("yyyy-MM-dd")
												}
												
											</div>
										</div>
									</div>
									<div class="row g-9 mb-7 ">
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
										<div class="fw-bold mt-5">Country</div>
										<div class="text-gray-600">@Model.PatientCountry</div>
										</div>
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
											<div class="fw-bold mt-5">Address</div>
											<div class="text-gray-600">@Model.PatientAddress</div>
											<!--begin::Details item-->
										</div>
									</div>
									<div class="row g-9 mb-7 ">
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
											<div class="fw-bold mt-5">Phones</div>
											<div class="text-gray-600">@Model.PatientTel1</div>
											<div class="text-gray-600">@Model.PatientTel2</div>
										</div>
										<div class="col-md-6 fv-row">
											<!--begin::Details item-->
											<!--begin::Details item-->
											<div class="fw-bold mt-5"></div>
											<div class="text-gray-600"></div>
											<!--begin::Details item-->
										</div>
									</div>
								</div>
							</div>
						<!--end::Details content-->
					</div>
					<!--end::Card body-->
				</div>

			</div>
			<!--end::Card-->
			<div class="tab-content  mb-10 ms-10" id="myTabContent" style="width:100%">
				<!--begin:::Tab pane-->
				<div class="tab-pane fade show active" id="kt_customer_view_overview_tab" role="tabpanel">
					<!--begin::Card-->
					<div class="card pt-4 mb-6 mb-xl-9">
						<!--begin::Card header-->
						<div class="card-header border-0">
							<!--begin::Card title-->
							<div class="card-title">
								<h2>@Model.PatientName Visit Records</h2>
							</div>
							<!--end::Card title-->
							<!--begin::Card toolbar-->
							<div class="card-toolbar">
								<!--begin::Filter-->
								<a href="/visit/add" class="btn btn-sm btn-flex btn-light-primary" >
									<!--begin::Svg Icon | path: icons/duotune/general/gen035.svg-->
									<span class="svg-icon svg-icon-3">
										<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor" />
											<rect x="10.8891" y="17.8033" width="12" height="2" rx="1" transform="rotate(-90 10.8891 17.8033)" fill="currentColor" />
											<rect x="6.01041" y="10.9247" width="12" height="2" rx="1" fill="currentColor" />
										</svg>
									</span>
									<!--end::Svg Icon-->Add Visit
								</a>
								<!--end::Filter-->
							</div>
							<!--end::Card toolbar-->
						</div>
						<!--end::Card header-->
						<!--begin::Card body-->
						<div class="card-body pt-0 pb-5">
							<!--begin::Table-->
							<table class="table align-middle table-row-dashed fs-6 gy-5" >
								<!--begin::Table head-->
								<thead class="border-bottom border-gray-200 fs-7 fw-bold">
									<!--begin::Table row-->
									<tr class="text-start text-muted text-uppercase gs-0">
										<th class="">Status</th>
										<th>Doctor Name</th>
										<th class ="">Start Date</th>
										<th class="">End Date</th>
										<th class="text-end min-w-100px pe-4">Actions</th>
									</tr>
									<!--end::Table row-->
								</thead>
								<!--end::Table head-->
								<!--begin::Table body-->
								<tbody class="fs-6 fw-semibold text-gray-600">
									<!--begin::Table row-->
									@if (Visitlist!=null)
									{
										@foreach (var item in Visitlist){
											<tr>
												<!--begin::Invoice=-->
												<td>
													<div class="d-flex align-items-center mb-6">
														@{
															
															if (item.VisitStatus.ToLower() == "pending")
															{ 
																<span data-kt-element="bullet" class="bullet bullet-vertical d-flex align-items-center min-h-40px mh-100 me-4 bg-warning"></span>
															}
															else if (item.VisitStatus.ToLower() == "active")
															{ 
																<span data-kt-element="bullet" class="bullet bullet-vertical d-flex align-items-center min-h-40px mh-100 me-4 bg-success"></span>

															}
															else if (item.VisitStatus.ToLower() == "cancel")
															{ 
																<span data-kt-element="bullet" class="bullet bullet-vertical d-flex align-items-center min-h-40px mh-100 me-4 bg-danger"></span>
															}
														}
														
														 <div class="flex-grow-1 me-5">
															<span class="text-gray-600 mb-1">@item.VisitStatus</span>
														 </div>
													</div>
										</td>
										<!--end::Invoice=-->
										<!--begin::Status=-->
                                         <td>
                                              <span class="text-gray-600 mb-1">@item.RefererDoctor</span>
										</td>
										<!--end::Status=-->
										<!--begin::Amount=-->
										<td>
											@if (@item.VisitStartDate!=null)
											{
											 <span class="text-gray-600  mb-1">@item.VisitStartDate.Value.ToString("yyyy-MM-dd")</span>
                                            }
										</td>
										<!--end::Amount=-->
										<!--begin::Date=-->
										<td>
											@if (@item.VisitEndDate != null)
											{
												<span class="text-gray-600  mb-1">@item.VisitEndDate.Value.ToString("yyyy-MM-dd")</span>
											}
											
										</td>
										<!--end::Date=-->
										<!--begin::Action=-->
										<td class="pe-0 text-end">
											<div  class="btn btn-sm btn-light btn-active-light-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
												Actions
												<!--begin::Svg Icon | path: icons/duotune/arrows/arr072.svg-->
												<span class="svg-icon svg-icon-5 m-0">
													<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
														<path d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z" fill="currentColor" />
													</svg>
												</span>
												<!--end::Svg Icon-->
											</div>
											<!--begin::Menu-->
											<div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-125px py-4" data-kt-menu="true">
												<!--begin::Menu item-->
												<div class="menu-item px-3">
															@if (item.VisitStatus.ToLower() == "pending")
															{
																<a class="menu-link px-3" href="/PatientInvoice/PatientInvoicePay/@item.VisitId">Pay</a>

															}
															else if (item.VisitStatus.ToLower() == "active")
															{
																<a asp-action="Details" asp-controller="Visit" asp-route-id="@item.VisitId" class="menu-link px-3">Services</a>

															}
															else if (item.VisitStatus.ToLower() == "cancel")
															{
																<a asp-action="Cancle" asp-controller="PatientInvoice" asp-route-id="@item.VisitId" class="menu-link px-3">Cancle</a>

															}
													
												</div>
												<!--end::Menu item-->
											</div>
											<!--end::Menu-->
										</td>
										<!--end::Action=-->
									</tr>
										<!--end::Table row-->
                                    }
									}
									
								</tbody>
								<!--end::Table body-->
							</table>
							<!--end::Table-->
						</div>
						<!--end::Card body-->
					</div>
					<!--end::Card-->
					<!--end:::Tab content-->
				</div>
			</div>
		</div>
		<!--begin:::Tab content-->
		
	</div>
</div>
